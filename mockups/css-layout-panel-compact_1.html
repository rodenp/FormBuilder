<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>CSS Layout Panel - Compact</title>
  <style>
    * {
      box-sizing: border-box;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    }
    
    body {
      background: #f0f4f8;
      margin: 0;
      padding: 20px;
      min-height: 100vh;
      display: flex;
      justify-content: center;
    }
    
    .panel {
      width: 360px;
      background: white;
      border-radius: 12px;
      box-shadow: 0 1px 3px rgba(0,0,0,0.1), 0 4px 12px rgba(0,0,0,0.05);
      overflow: hidden;
    }
    
    .panel-header {
      padding: 16px;
      border-bottom: 1px solid #e5e7eb;
    }
    
    .panel-header h1 {
      font-size: 16px;
      font-weight: 600;
      color: #1f2937;
      margin: 0 0 4px 0;
    }
    
    .panel-header p {
      font-size: 12px;
      color: #6b7280;
      margin: 0;
    }
    
    .panel-content {
      padding: 16px;
    }
    
    .section-title {
      font-size: 11px;
      font-weight: 600;
      color: #6b7280;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      margin-bottom: 12px;
    }
    
    .control-group {
      margin-bottom: 16px;
    }
    
    .control-label {
      font-size: 12px;
      font-weight: 500;
      color: #374151;
      margin-bottom: 6px;
      display: block;
    }
    
    /* Mode tabs */
    .mode-tabs {
      display: flex;
      background: #f3f4f6;
      border-radius: 8px;
      padding: 3px;
      gap: 2px;
    }
    
    .mode-tab {
      flex: 1;
      padding: 8px 12px;
      border: none;
      background: transparent;
      border-radius: 6px;
      font-size: 12px;
      font-weight: 500;
      color: #6b7280;
      cursor: pointer;
      transition: all 0.15s ease;
    }
    
    .mode-tab:hover {
      color: #374151;
    }
    
    .mode-tab.active {
      background: #3b82f6;
      color: white;
      box-shadow: 0 1px 3px rgba(59, 130, 246, 0.3);
    }
    
    /* Direction toggle */
    .direction-toggle {
      display: flex;
      gap: 6px;
    }
    
    .dir-btn {
      flex: 1;
      padding: 8px;
      border: 1px solid #e5e7eb;
      background: white;
      border-radius: 6px;
      font-size: 12px;
      color: #6b7280;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 6px;
      transition: all 0.15s ease;
    }
    
    .dir-btn:hover {
      border-color: #d1d5db;
    }
    
    .dir-btn.active {
      background: #3b82f6;
      border-color: #3b82f6;
      color: white;
    }
    
    .dir-btn svg {
      width: 14px;
      height: 14px;
    }
    
    /* Icon buttons */
    .icon-group {
      display: flex;
      gap: 4px;
    }
    
    .icon-btn {
      flex: 1;
      height: 36px;
      border: 1px solid #e5e7eb;
      background: white;
      border-radius: 6px;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.15s ease;
    }
    
    .icon-btn.hidden {
      display: none;
    }
    
    .icon-btn:hover {
      border-color: #d1d5db;
      background: #f9fafb;
    }
    
    .icon-btn.active {
      background: #3b82f6;
      border-color: #3b82f6;
    }
    
    .icon-btn.active svg {
      stroke: white;
    }
    
    .icon-btn.active .bar {
      background: white;
    }
    
    .icon-btn svg {
      width: 16px;
      height: 16px;
      stroke: #6b7280;
      fill: none;
      stroke-width: 2;
    }
    
    /* Spacing icons */
    .spacing-icon {
      display: flex;
      gap: 2px;
      align-items: center;
      width: 24px;
    }
    
    .spacing-icon .bar {
      height: 12px;
      background: #6b7280;
      border-radius: 1px;
    }
    
    /* Box model - clean nested design with edge inputs */
    .box-model-container {
      padding: 20px 0;
    }
    
    .box-model {
      position: relative;
      width: 100%;
      padding: 0 28px;
    }
    
    /* Margin layer */
    .margin-box {
      border: 2px dashed #60a5fa;
      border-radius: 10px;
      background: linear-gradient(135deg, rgba(59, 130, 246, 0.06) 0%, rgba(59, 130, 246, 0.02) 100%);
      padding: 36px 32px;
      position: relative;
    }
    
    .box-label {
      position: absolute;
      font-size: 10px;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }
    
    .margin-label {
      top: 8px;
      left: 12px;
      color: #3b82f6;
    }
    
    /* Padding layer */
    .padding-box {
      border: 2px dashed #34d399;
      border-radius: 8px;
      background: linear-gradient(135deg, rgba(16, 185, 129, 0.08) 0%, rgba(16, 185, 129, 0.02) 100%);
      padding: 36px 32px;
      position: relative;
    }
    
    .padding-label {
      top: 8px;
      left: 12px;
      color: #10b981;
    }
    
    /* Content */
    .content-box {
      background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
      border: 1px solid #e2e8f0;
      border-radius: 6px;
      padding: 24px 12px;
      text-align: center;
      font-size: 13px;
      font-weight: 500;
      color: #64748b;
    }
    
    /* Spacing inputs - positioned at edges */
    .spacing-input {
      width: 40px;
      height: 26px;
      border: 1px solid #e5e7eb;
      border-radius: 6px;
      text-align: center;
      font-size: 12px;
      font-weight: 500;
      color: #374151;
      outline: none;
      background: white;
      box-shadow: 0 1px 3px rgba(0,0,0,0.08);
      transition: all 0.15s ease;
      position: absolute;
    }
    
    .spacing-input:focus {
      border-color: #3b82f6;
      box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.15);
      z-index: 10;
    }
    
    .spacing-input:hover {
      border-color: #cbd5e1;
    }
    
    /* Margin input positions */
    .margin-top-input {
      top: -13px;
      left: 50%;
      transform: translateX(-50%);
    }
    
    .margin-right-input {
      right: -24px;
      top: 50%;
      transform: translateY(-50%);
    }
    
    .margin-bottom-input {
      bottom: -13px;
      left: 50%;
      transform: translateX(-50%);
    }
    
    .margin-left-input {
      left: -24px;
      top: 50%;
      transform: translateY(-50%);
    }
    
    /* Padding input positions */
    .padding-top-input {
      top: -13px;
      left: 50%;
      transform: translateX(-50%);
    }
    
    .padding-right-input {
      right: -24px;
      top: 50%;
      transform: translateY(-50%);
    }
    
    .padding-bottom-input {
      bottom: -13px;
      left: 50%;
      transform: translateX(-50%);
    }
    
    .padding-left-input {
      left: -24px;
      top: 50%;
      transform: translateY(-50%);
    }
    
    /* Gap control */
    .gap-control {
      display: flex;
      align-items: center;
      gap: 10px;
    }
    
    .gap-slider {
      flex: 1;
      -webkit-appearance: none;
      height: 4px;
      background: #e5e7eb;
      border-radius: 2px;
      outline: none;
    }
    
    .gap-slider::-webkit-slider-thumb {
      -webkit-appearance: none;
      width: 16px;
      height: 16px;
      background: #3b82f6;
      border-radius: 50%;
      cursor: pointer;
      box-shadow: 0 1px 3px rgba(59, 130, 246, 0.4);
    }
    
    .gap-value {
      width: 48px;
      height: 28px;
      border: 1px solid #e5e7eb;
      border-radius: 6px;
      text-align: center;
      font-size: 12px;
      font-weight: 500;
      color: #374151;
    }
    
    .gap-value:focus {
      outline: none;
      border-color: #3b82f6;
    }
    
    /* Grid columns */
    .grid-control {
      display: none;
      align-items: center;
      gap: 8px;
    }
    
    .grid-control.visible {
      display: flex;
    }
    
    .grid-input {
      width: 48px;
      height: 28px;
      border: 1px solid #e5e7eb;
      border-radius: 6px;
      text-align: center;
      font-size: 12px;
    }
    
    .grid-input:focus {
      outline: none;
      border-color: #3b82f6;
    }
    
    /* Preview */
    .preview-section {
      border-top: 1px solid #e5e7eb;
      padding: 16px;
      background: #fafbfc;
    }
    
    .preview-header {
      font-size: 12px;
      color: #6b7280;
      margin-bottom: 12px;
    }
    
    .preview-box {
      border: 1px dashed #d1d5db;
      border-radius: 8px;
      min-height: 180px;
      background: white;
      overflow: hidden;
    }
    
    .preview-item {
      border-radius: 8px;
      font-weight: 600;
      font-size: 14px;
      color: white;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    .preview-item.a { background: linear-gradient(135deg, #f87171, #ef4444); }
    .preview-item.b { background: linear-gradient(135deg, #34d399, #10b981); }
    .preview-item.c { background: linear-gradient(135deg, #a78bfa, #8b5cf6); }
    
    /* Disabled state */
    .control-group.disabled {
      opacity: 0.35;
      pointer-events: none;
    }
    
    /* CSS output */
    .css-output {
      background: #1e293b;
      border-radius: 6px;
      padding: 12px;
      margin-top: 12px;
      overflow-x: auto;
    }
    
    .css-output pre {
      margin: 0;
      font-family: 'SF Mono', 'Fira Code', monospace;
      font-size: 10px;
      line-height: 1.5;
      color: #e2e8f0;
      white-space: pre-wrap;
    }
    
    .css-output .prop { color: #7dd3fc; }
    .css-output .val { color: #fcd34d; }
    
    /* Item controls */
    .item-controls {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      margin-top: 12px;
    }
    
    .item-chip {
      display: flex;
      align-items: center;
      gap: 6px;
      padding: 6px 10px;
      background: #f1f5f9;
      border-radius: 6px;
      font-size: 12px;
    }
    
    .item-chip .dot {
      width: 10px;
      height: 10px;
      border-radius: 50%;
      flex-shrink: 0;
    }
    
    .item-chip .dot.a { background: #ef4444; }
    .item-chip .dot.b { background: #10b981; }
    .item-chip .dot.c { background: #8b5cf6; }
    .item-chip .dot.d { background: #f59e0b; }
    
    .item-chip input {
      width: 36px;
      padding: 3px 4px;
      border: 1px solid #e2e8f0;
      border-radius: 4px;
      font-size: 11px;
      text-align: center;
      -moz-appearance: textfield;
    }
    
    .item-chip input::-webkit-outer-spin-button,
    .item-chip input::-webkit-inner-spin-button {
      -webkit-appearance: none;
      margin: 0;
    }
    
    .item-chip input:focus {
      outline: none;
      border-color: #3b82f6;
    }
    
    .item-chip .remove-btn {
      border: none;
      background: none;
      color: #94a3b8;
      cursor: pointer;
      font-size: 14px;
      padding: 0 2px;
      line-height: 1;
    }
    
    .item-chip .remove-btn:hover {
      color: #ef4444;
    }
    
    .add-item-btn {
      padding: 6px 12px;
      background: white;
      border: 1px dashed #cbd5e1;
      border-radius: 6px;
      font-size: 12px;
      color: #64748b;
      cursor: pointer;
      transition: all 0.15s ease;
    }
    
    .add-item-btn:hover {
      border-color: #3b82f6;
      color: #3b82f6;
      background: #eff6ff;
    }
  </style>
</head>
<body>
  <div class="panel">
    <div class="panel-header">
      <h1>Layout Panel</h1>
      <p>Visual box model with integrated controls</p>
    </div>
    
    <div class="panel-content">
      <div class="section-title">Layout</div>
      
      <!-- Mode -->
      <div class="control-group">
        <div class="mode-tabs">
          <button class="mode-tab" data-mode="block" onclick="setMode('block')">Block</button>
          <button class="mode-tab active" data-mode="flex" onclick="setMode('flex')">Flex</button>
          <button class="mode-tab" data-mode="grid" onclick="setMode('grid')">Grid</button>
        </div>
      </div>
      
      <!-- Direction -->
      <div class="control-group" id="direction-group">
        <label class="control-label">Direction</label>
        <div class="direction-toggle">
          <button class="dir-btn active" data-value="row" onclick="setDirection('row')">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M5 12h14M13 5l7 7-7 7"/></svg>
          </button>
          <button class="dir-btn" data-value="column" onclick="setDirection('column')">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 5v14M5 13l7 7 7-7"/></svg>
          </button>
        </div>
      </div>
      
      <!-- Horizontal Spacing -->
      <div class="control-group" id="justify-group">
        <label class="control-label">Horizontal Spacing</label>
        <div class="icon-group">
          <button class="icon-btn active" data-value="flex-start" onclick="setJustify('flex-start')" title="Start">
            <div class="spacing-icon" style="justify-content: flex-start;"><div class="bar" style="width:4px"></div><div class="bar" style="width:6px"></div><div class="bar" style="width:4px"></div></div>
          </button>
          <button class="icon-btn" data-value="center" onclick="setJustify('center')" title="Center">
            <div class="spacing-icon" style="justify-content: center;"><div class="bar" style="width:4px"></div><div class="bar" style="width:6px"></div><div class="bar" style="width:4px"></div></div>
          </button>
          <button class="icon-btn" data-value="flex-end" onclick="setJustify('flex-end')" title="End">
            <div class="spacing-icon" style="justify-content: flex-end;"><div class="bar" style="width:4px"></div><div class="bar" style="width:6px"></div><div class="bar" style="width:4px"></div></div>
          </button>
          <button class="icon-btn" data-value="space-between" onclick="setJustify('space-between')" title="Space Between">
            <div class="spacing-icon" style="justify-content: space-between;width:100%"><div class="bar" style="width:4px"></div><div class="bar" style="width:5px"></div><div class="bar" style="width:4px"></div></div>
          </button>
          <button class="icon-btn" data-value="space-around" onclick="setJustify('space-around')" title="Space Around">
            <div class="spacing-icon" style="justify-content: space-around;width:100%"><div class="bar" style="width:4px"></div><div class="bar" style="width:5px"></div><div class="bar" style="width:4px"></div></div>
          </button>
          <button class="icon-btn" data-value="space-evenly" onclick="setJustify('space-evenly')" title="Space Evenly">
            <div class="spacing-icon" style="justify-content: space-evenly;width:100%"><div class="bar" style="width:4px"></div><div class="bar" style="width:5px"></div><div class="bar" style="width:4px"></div></div>
          </button>
        </div>
      </div>
      
      <!-- Vertical Alignment -->
      <div class="control-group" id="align-group">
        <label class="control-label">Vertical Alignment</label>
        <div class="icon-group">
          <button class="icon-btn active" data-value="flex-start" onclick="setAlign('flex-start')" title="Top">
            <svg viewBox="0 0 24 24"><path d="M12 5v10M8 9l4-4 4 4"/></svg>
          </button>
          <button class="icon-btn" data-value="center" onclick="setAlign('center')" title="Center">
            <svg viewBox="0 0 24 24"><path d="M8 12h8M12 8v8"/></svg>
          </button>
          <button class="icon-btn" data-value="flex-end" onclick="setAlign('flex-end')" title="Bottom">
            <svg viewBox="0 0 24 24"><path d="M12 19V9M8 15l4 4 4-4"/></svg>
          </button>
          <button class="icon-btn" data-value="stretch" onclick="setAlign('stretch')" title="Stretch">
            <svg viewBox="0 0 24 24"><path d="M12 3v18M8 7l4-4 4 4M8 17l4 4 4-4"/></svg>
          </button>
        </div>
      </div>
      
      <!-- Box Model -->
      <div class="box-model-container">
        <div class="box-model">
          <div class="margin-box">
            <span class="box-label margin-label">Margin</span>
            
            <!-- Margin inputs on edges -->
            <input type="number" class="spacing-input margin-top-input" id="margin-top" value="8" onchange="updateSpacing()">
            <input type="number" class="spacing-input margin-right-input" id="margin-right" value="8" onchange="updateSpacing()">
            <input type="number" class="spacing-input margin-bottom-input" id="margin-bottom" value="8" onchange="updateSpacing()">
            <input type="number" class="spacing-input margin-left-input" id="margin-left" value="8" onchange="updateSpacing()">
            
            <div class="padding-box">
              <span class="box-label padding-label">Padding</span>
              
              <!-- Padding inputs on edges -->
              <input type="number" class="spacing-input padding-top-input" id="padding-top" value="16" onchange="updateSpacing()">
              <input type="number" class="spacing-input padding-right-input" id="padding-right" value="16" onchange="updateSpacing()">
              <input type="number" class="spacing-input padding-bottom-input" id="padding-bottom" value="16" onchange="updateSpacing()">
              <input type="number" class="spacing-input padding-left-input" id="padding-left" value="16" onchange="updateSpacing()">
              
              <div class="content-box">Content</div>
            </div>
          </div>
        </div>
      </div>
      
      <!-- Gap -->
      <div class="control-group" id="gap-group">
        <label class="control-label">Gap between items: <span id="gap-label">16</span>px</label>
        <div class="gap-control">
          <input type="range" class="gap-slider" min="0" max="40" value="16" oninput="setGap(this.value)">
          <input type="number" class="gap-value" value="16" onchange="setGap(this.value)">
        </div>
      </div>
      
      <!-- Grid Columns -->
      <div class="control-group grid-control" id="grid-group">
        <label class="control-label">Columns</label>
        <input type="number" class="grid-input" id="grid-cols" value="3" min="1" max="6" onchange="setGridCols(this.value)">
      </div>
    </div>
    
    <!-- Preview -->
    <div class="preview-section">
      <div class="preview-header">Live Preview - <span id="item-count">3</span> Elements</div>
      <div class="preview-box" id="preview"></div>
      
      <!-- Item controls -->
      <div class="item-controls" id="item-controls"></div>
      
      <div class="css-output">
        <pre id="css-output"></pre>
      </div>
    </div>
  </div>
  
  <script>
    const state = {
      mode: 'flex',
      direction: 'row',
      justify: 'flex-start',
      align: 'flex-start',
      gap: 16,
      gridCols: 3,
      margin: { top: 8, right: 8, bottom: 8, left: 8 },
      padding: { top: 16, right: 16, bottom: 16, left: 16 },
      items: [
        { id: 'a', w: 60, h: 50 },
        { id: 'b', w: 90, h: 70 },
        { id: 'c', w: 70, h: 45 }
      ]
    };
    
    function setMode(mode) {
      state.mode = mode;
      document.querySelectorAll('.mode-tab').forEach(t => t.classList.toggle('active', t.dataset.mode === mode));
      
      const isBlock = mode === 'block';
      const isFlex = mode === 'flex';
      const isGrid = mode === 'grid';
      
      // Direction only shows for flex
      document.getElementById('direction-group').style.display = isFlex ? 'block' : 'none';
      // Horizontal positioning works for all modes
      document.getElementById('justify-group').classList.remove('disabled');
      // Vertical alignment only shows for flex and grid
      document.getElementById('align-group').style.display = isBlock ? 'none' : 'block';
      // Gap doesn't apply to block
      document.getElementById('gap-group').style.display = isBlock ? 'none' : 'block';
      // Grid columns only for grid
      document.getElementById('grid-group').classList.toggle('visible', isGrid);
      
      // Hide space-between, space-around, space-evenly for block mode
      document.querySelectorAll('#justify-group .icon-btn').forEach(btn => {
        const val = btn.dataset.value;
        if (val === 'space-between' || val === 'space-around' || val === 'space-evenly') {
          btn.style.display = isBlock ? 'none' : 'flex';
        }
      });
      
      // Reset to flex-start if current justify doesn't apply to block
      if (isBlock && (state.justify === 'space-between' || state.justify === 'space-around' || state.justify === 'space-evenly')) {
        setJustify('flex-start');
      }
      
      render();
    }
    
    function setDirection(dir) {
      state.direction = dir;
      document.querySelectorAll('.dir-btn').forEach(b => b.classList.toggle('active', b.dataset.value === dir));
      render();
    }
    
    function setJustify(val) {
      state.justify = val;
      document.querySelectorAll('#justify-group .icon-btn').forEach(b => b.classList.toggle('active', b.dataset.value === val));
      render();
    }
    
    function setAlign(val) {
      state.align = val;
      document.querySelectorAll('#align-group .icon-btn').forEach(b => b.classList.toggle('active', b.dataset.value === val));
      render();
    }
    
    function setGap(val) {
      state.gap = parseInt(val) || 0;
      document.getElementById('gap-label').textContent = state.gap;
      document.querySelector('.gap-slider').value = state.gap;
      document.querySelector('.gap-value').value = state.gap;
      render();
    }
    
    function setGridCols(val) {
      state.gridCols = parseInt(val) || 1;
      render();
    }
    
    function updateSpacing() {
      state.margin.top = parseInt(document.getElementById('margin-top').value) || 0;
      state.margin.right = parseInt(document.getElementById('margin-right').value) || 0;
      state.margin.bottom = parseInt(document.getElementById('margin-bottom').value) || 0;
      state.margin.left = parseInt(document.getElementById('margin-left').value) || 0;
      state.padding.top = parseInt(document.getElementById('padding-top').value) || 0;
      state.padding.right = parseInt(document.getElementById('padding-right').value) || 0;
      state.padding.bottom = parseInt(document.getElementById('padding-bottom').value) || 0;
      state.padding.left = parseInt(document.getElementById('padding-left').value) || 0;
      render();
    }
    
    function render() {
      const preview = document.getElementById('preview');
      const p = state.padding;
      
      let style = '';
      if (state.mode === 'flex') {
        style = `display:flex;flex-direction:${state.direction};justify-content:${state.justify};align-items:${state.align};gap:${state.gap}px;padding:${p.top}px ${p.right}px ${p.bottom}px ${p.left}px;min-height:200px;`;
      } else if (state.mode === 'grid') {
        style = `display:grid;grid-template-columns:repeat(${state.gridCols},auto);justify-content:${state.justify};align-items:${state.align};gap:${state.gap}px;padding:${p.top}px ${p.right}px ${p.bottom}px ${p.left}px;min-height:200px;`;
      } else {
        style = `display:block;padding:${p.top}px ${p.right}px ${p.bottom}px ${p.left}px;min-height:200px;`;
      }
      
      preview.style.cssText = style;
      
      const m = state.margin;
      preview.innerHTML = state.items.map(item => {
        const h = state.align === 'stretch' && state.mode !== 'block' ? 'auto' : item.h + 'px';
        
        let itemStyle = `width:${item.w}px;height:${h};`;
        
        if (state.mode === 'block') {
          // Horizontal positioning using margin auto
          if (state.justify === 'center') {
            itemStyle += `margin:${m.top}px auto ${m.bottom}px auto;`;
          } else if (state.justify === 'flex-end') {
            itemStyle += `margin:${m.top}px ${m.right}px ${m.bottom}px auto;`;
          } else {
            itemStyle += `margin:${m.top}px auto ${m.bottom}px ${m.left}px;`;
          }
        }
        
        return `<div class="preview-item ${item.id}" style="${itemStyle}">${item.id.toUpperCase()}</div>`;
      }).join('');
      
      // CSS output
      updateCSSOutput();
    }
    
    function updateCSSOutput() {
      const css = document.getElementById('css-output');
      const p = state.padding;
      const m = state.margin;
      
      if (state.mode === 'flex') {
        css.innerHTML = `.container {
  <span class="prop">display</span>: <span class="val">flex</span>;
  <span class="prop">flex-direction</span>: <span class="val">${state.direction}</span>;
  <span class="prop">justify-content</span>: <span class="val">${state.justify}</span>;
  <span class="prop">align-items</span>: <span class="val">${state.align}</span>;
  <span class="prop">gap</span>: <span class="val">${state.gap}px</span>;
  <span class="prop">padding</span>: <span class="val">${p.top}px ${p.right}px ${p.bottom}px ${p.left}px</span>;
}`;
      } else if (state.mode === 'grid') {
        css.innerHTML = `.container {
  <span class="prop">display</span>: <span class="val">grid</span>;
  <span class="prop">grid-template-columns</span>: <span class="val">repeat(${state.gridCols}, auto)</span>;
  <span class="prop">justify-content</span>: <span class="val">${state.justify}</span>;
  <span class="prop">align-items</span>: <span class="val">${state.align}</span>;
  <span class="prop">gap</span>: <span class="val">${state.gap}px</span>;
  <span class="prop">padding</span>: <span class="val">${p.top}px ${p.right}px ${p.bottom}px ${p.left}px</span>;
}`;
      } else {
        // Block mode CSS
        let marginVal = `${m.top}px ${m.right}px ${m.bottom}px ${m.left}px`;
        if (state.justify === 'center') {
          marginVal = `${m.top}px auto ${m.bottom}px auto`;
        } else if (state.justify === 'flex-end') {
          marginVal = `${m.top}px ${m.right}px ${m.bottom}px auto`;
        }
        
        css.innerHTML = `.container {
  <span class="prop">display</span>: <span class="val">block</span>;
  <span class="prop">padding</span>: <span class="val">${p.top}px ${p.right}px ${p.bottom}px ${p.left}px</span>;
}
.item {
  <span class="prop">margin</span>: <span class="val">${marginVal}</span>;
}`;
      }
    }
    
    function renderItemControls() {
      const container = document.getElementById('item-controls');
      const colors = ['a', 'b', 'c', 'd'];
      
      container.innerHTML = state.items.map((item, i) => `
        <div class="item-chip">
          <div class="dot ${colors[i % colors.length]}"></div>
          <span>${item.id.toUpperCase()}</span>
          <input type="number" value="${Math.round(item.w)}" onchange="updateItemSize('${item.id}', 'w', this.value)" title="Width">
          <span>×</span>
          <input type="number" value="${Math.round(item.h)}" onchange="updateItemSize('${item.id}', 'h', this.value)" title="Height">
          ${state.items.length > 1 ? `<button class="remove-btn" onclick="removeItem('${item.id}')" title="Remove">×</button>` : ''}
        </div>
      `).join('') + `<button class="add-item-btn" onclick="addItem()">+ Add</button>`;
      
      document.getElementById('item-count').textContent = state.items.length;
    }
    
    function updateItemSize(id, dimension, value) {
      const item = state.items.find(i => i.id === id);
      if (item) {
        item[dimension] = parseInt(value) || 50;
        render();
      }
    }
    
    function addItem() {
      const labels = ['a', 'b', 'c', 'd', 'e', 'f', 'g', 'h'];
      const newId = labels[state.items.length % labels.length];
      state.items.push({
        id: newId,
        w: 50 + Math.floor(Math.random() * 40),
        h: 40 + Math.floor(Math.random() * 30)
      });
      render();
      renderItemControls();
    }
    
    function removeItem(id) {
      state.items = state.items.filter(i => i.id !== id);
      render();
      renderItemControls();
    }
    
    renderItemControls();
    render();
  </script>
</body>
</html>
